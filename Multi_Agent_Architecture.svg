<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="900px" height="650px" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <!-- Arrow Marker Definition - FULLY ADJUSTED -->
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
        </marker>
        <!-- Second arrow marker with adjusted refX -->
        <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
        </marker>
        <!-- Drop Shadow Filter -->
        <filter id="drop-shadow" x="-20%" y="-20%" width="140%" height="140%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
            <feOffset dx="2" dy="2" result="offsetblur"/>
            <feComponentTransfer>
                <feFuncA type="linear" slope="0.3"/>
            </feComponentTransfer>
            <feMerge>
                <feMergeNode/>
                <feMergeNode in="SourceGraphic"/>
            </feMerge>
        </filter>
    </defs>

    <!-- Background and Border with drop shadow -->
    <rect x="10" y="10" width="880" height="630" rx="15" ry="15" fill="#f8f9fa" stroke="#333" stroke-width="2" filter="url(#drop-shadow)"/>
    
    <!-- Title with improved styling -->
    <rect x="200" y="20" width="500" height="45" rx="8" ry="8" fill="white" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <text x="450" y="50" font-family="Arial, sans-serif" font-size="20" text-anchor="middle" font-weight="bold">FireworksAI + MongoDB Multi-Agent Architecture</text>
    
    <!-- Client Interface Section with improved styling -->
    <rect x="40" y="90" width="200" height="500" rx="10" ry="10" fill="#e9ecef" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <rect x="40" y="90" width="200" height="40" rx="10" ry="10" fill="#343a40" stroke="#333" stroke-width="1"/>
    <text x="140" y="117" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="white" font-weight="bold">CLIENT INTERFACE</text>
    
    <rect x="60" y="160" width="160" height="70" rx="8" ry="8" fill="white" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <text x="140" y="200" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Web App / CLI</text>
    
    <rect x="60" y="260" width="160" height="70" rx="8" ry="8" fill="white" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <text x="140" y="285" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Chat / Query</text>
    <text x="140" y="310" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Interface</text>
    
    <!-- Manager Agent Section with improved styling -->
    <rect x="280" y="90" width="580" height="120" rx="10" ry="10" fill="#7b68ee" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <rect x="280" y="90" width="580" height="40" rx="10" ry="10" fill="#5f48ea" stroke="#333" stroke-width="1"/>
    <text x="570" y="117" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="white" font-weight="bold">MANAGER AGENT</text>
    
    <rect x="320" y="140" width="500" height="55" rx="8" ry="8" fill="#a084ff" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <text x="570" y="170" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#fff">Coordinates All Specialized Agents</text>
    <text x="570" y="190" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" font-style="italic" fill="#f0f0f0">FireworksAI Llama v3.7 70B</text>
    
    <!-- Specialized Agents Section with improved styling -->
    <rect x="280" y="240" width="580" height="150" rx="10" ry="10" fill="#32cd32" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <rect x="280" y="240" width="580" height="40" rx="10" ry="10" fill="#228b22" stroke="#333" stroke-width="1"/>
    <text x="570" y="267" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="white" font-weight="bold">SPECIALIZED AGENTS</text>
    
    <rect x="300" y="290" width="120" height="85" rx="8" ry="8" fill="white" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <text x="360" y="330" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Document</text>
    <text x="360" y="355" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Agent</text>
    
    <rect x="440" y="290" width="120" height="85" rx="8" ry="8" fill="white" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <text x="500" y="330" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Transcription</text>
    <text x="500" y="355" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Agent</text>
    <text x="500" y="370" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" font-style="italic">Whisper v3</text>
    
    <rect x="580" y="290" width="120" height="85" rx="8" ry="8" fill="white" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <text x="640" y="330" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Query</text>
    <text x="640" y="355" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Agent</text>
    
    <rect x="720" y="290" width="120" height="85" rx="8" ry="8" fill="white" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <text x="780" y="330" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Analysis</text>
    <text x="780" y="355" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Agent</text>
    
    <!-- Document Processing Section with improved styling -->
    <rect x="280" y="420" width="275" height="170" rx="10" ry="10" fill="#87ceeb" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <rect x="280" y="420" width="275" height="40" rx="10" ry="10" fill="#4682b4" stroke="#333" stroke-width="1"/>
    <text x="417" y="447" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="white" font-weight="bold">DOCUMENT PROCESSING</text>
    
    <rect x="300" y="470" width="235" height="50" rx="8" ry="8" fill="white" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <text x="417" y="500" font-family="Arial, sans-serif" font-size="15" text-anchor="middle">Extract Text &amp; Transcribe Audio</text>
    
    <rect x="300" y="530" width="235" height="50" rx="8" ry="8" fill="white" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <text x="417" y="560" font-family="Arial, sans-serif" font-size="15" text-anchor="middle">Generate Embeddings</text>
    <text x="417" y="575" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" font-style="italic">Nomic Embed v1.5</text>
    
    <!-- Database Operations Section with improved styling -->
    <rect x="585" y="420" width="275" height="170" rx="10" ry="10" fill="#ffa500" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <rect x="585" y="420" width="275" height="40" rx="10" ry="10" fill="#ff8c00" stroke="#333" stroke-width="1"/>
    <text x="722" y="447" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="white" font-weight="bold">DATABASE OPERATIONS</text>
    
    <rect x="605" y="470" width="235" height="50" rx="8" ry="8" fill="white" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <text x="722" y="500" font-family="Arial, sans-serif" font-size="15" text-anchor="middle">Vector Search with MongoDB</text>
    
    <rect x="605" y="530" width="235" height="50" rx="8" ry="8" fill="white" stroke="#333" stroke-width="1" filter="url(#drop-shadow)"/>
    <text x="722" y="560" font-family="Arial, sans-serif" font-size="15" text-anchor="middle">Store &amp; Retrieve Documents</text>
    
    <!-- SIMPLIFIED FIXED ARROWS -->
    <!-- Web App to Manager -->
    <line x1="220" y1="195" x2="270" y2="165" stroke="#333" stroke-width="2.5" marker-end="url(#arrowhead)"/>
    
    <!-- Chat/Query Interface to Manager -->
    <line x1="220" y1="295" x2="270" y2="205" stroke="#333" stroke-width="2.5" marker-end="url(#arrowhead)"/>
    
    <!-- Manager to Specialized Agents -->
    <path d="M 570,210 C 570,220 570,230 570,239" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Document Agent to Document Processing -->
    <path d="M 360,375 C 360,390 360,405 360,419" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Transcription Agent to Document Processing -->
    <path d="M 500,375 C 500,390 460,400 445,419" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Query Agent to Database -->
    <path d="M 640,375 C 640,390 680,400 695,419" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Analysis Agent to Database -->
    <path d="M 780,375 C 780,390 780,405 780,419" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Document Processing to Database -->
    <path d="M 555,505 C 565,505 575,505 584,505" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
</svg> 